@* @page "/Applications/Edit/{id:guid}" *@
@rendermode @(new InteractiveServerRenderMode(prerender: false))

@if (updateApplication == null)
{
	<p><em>Loading...</em></p>
}
else
{
	<EditForm EditContext="@_editContext">
		@* Model="createApplication" *@
		@*     <DataAnnotationsValidator />
    <ValidationSummary /> *@

		<MudGrid>
			<MudItem md="12">
				<MudPaper Class="pa-4 pb-8 " Outlined="true">
					<MudGrid>
						<MudItem md="12" Style="width:100%">
							<MudTextField Label="Name"
										  Variant="Variant.Text"
										  InputType="InputType.Text"
										  @bind-Value="updateApplication.Name"
										  TextChanged="() => ClearValidationMessage(nameof(updateApplication.Name))" />
							<ValidationMessage For="@(() => updateApplication.Name)" />
						</MudItem>

						<MudItem md="12" Style="width:100%">
							<MudTextField T="string" MaxLines=3 Lines=3 Label="Description"
										  Variant="Variant.Text"
										  InputType="InputType.Text"
										  @bind-Value="updateApplication.Description"
										  TextChanged="() => ClearValidationMessage(nameof(updateApplication.Description))" />
							<ValidationMessage For="@(() => updateApplication.Description)" />
						</MudItem>

						<MudItem md="6" Style="width:100%">
							<MudTextField Label="Abbreviation"
										  Variant="Variant.Text"
										  InputType="InputType.Text"
										  @bind-Value="updateApplication.Abbreviation"
										  TextChanged="() => ClearValidationMessage(nameof(updateApplication.Abbreviation))" />

							<ValidationMessage For="@(() => updateApplication.Abbreviation)" />
						</MudItem>
						<MudItem md="6" Style="width:100%">
							<MudTextField Label="Friendly Id"
										  Variant="Variant.Text"
										  InputType="InputType.Text"
										  @bind-Value="updateApplication.FriendlyId"
										  TextChanged="() => ClearValidationMessage(nameof(updateApplication.FriendlyId))" />

							<ValidationMessage For="@(() => updateApplication.FriendlyId)" />
						</MudItem>

						<MudItem md="12" Style="width:100%">
							<MudTextField Label="Icon Url"
										  Variant="Variant.Text"
										  InputType="InputType.Url"
										  @bind-Value="updateApplication.IconUrl"
										  TextChanged="() => ClearValidationMessage(nameof(updateApplication.IconUrl))" />
							<ValidationMessage For="@(() => updateApplication.IconUrl)" />
						</MudItem>

						<MudItem md="6">
							<MudSwitch Label="Is Active"
									   Disabled="true"
									   Color="Color.Info"
									   UncheckedColor="Color.Warning"
									   @bind-Value="updateApplication.IsActive" />
						</MudItem>
					</MudGrid>
				</MudPaper>
			</MudItem>
			<MudItem md="12" Style="text-align:right">

				<MudButton Variant="Variant.Outlined"
						   Color="Color.Secondary"
						   OnClick="HandleCancelAsync">Cancel</MudButton>

				<MudButton ButtonType="ButtonType.Submit"
						   Variant="Variant.Filled"
						   Color="Color.Primary"
						   OnClick="HandleUpdateAsync">Update</MudButton>

			</MudItem>


			@if (!string.IsNullOrEmpty(_error))
			{
				<MudItem md="12">
					<div class="alert alert-danger alert-dismissible fade show mt-2 mb-0" role="alert">
						<strong>Hey, an error happened!</strong>
						@_error
						<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
					</div>
				</MudItem>
			}


		</MudGrid>

	</EditForm>

}
